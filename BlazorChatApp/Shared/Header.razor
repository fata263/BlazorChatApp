@using Microsoft.JSInterop
@inject IJSRuntime JS

<NavMenu />
@if (!string.IsNullOrEmpty(Username))
{
    <header class="main-header">
        <div><b>👤 @FullName</b> | <i>@Role</i> | 🆔 @Username</div>
        <div>📍 Station: <b>@StationName</b> | Supervisor: <b>@Supervisor</b></div>
    </header>
}

@code {
    private string Username = "", FullName = "", Role = "", StationName = "", Supervisor = "";

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (!firstRender) return;

        Username = await JS.InvokeAsync<string>("sessionStorage.getItem", "username") ?? "";
        FullName = $"{await JS.InvokeAsync<string>("sessionStorage.getItem", "firstName")} {await JS.InvokeAsync<string>("sessionStorage.getItem", "lastName")}";
        Role = await JS.InvokeAsync<string>("sessionStorage.getItem", "role") ?? "";
        StationName = await JS.InvokeAsync<string>("sessionStorage.getItem", "stationName") ?? "";
        Supervisor = await JS.InvokeAsync<string>("sessionStorage.getItem", "supervisor") ?? "";

        await InvokeAsync(StateHasChanged);
    }

}